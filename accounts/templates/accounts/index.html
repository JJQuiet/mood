{% extends 'base.html' %}
{% load static %}
{% block head_title %}主页{% endblock %}
{% block css %}
<link rel="stylesheet" href="{% static 'css/index.css' %}">
{% endblock %}
{% block content %}
<div class="guide-section">
    <ul>
        <li><a href="javascript:void(0);" class="">
            <svg t="1617351964328" class="icon" viewBox="0 0 1024 1024" version="1.1"
                 xmlns="http://www.w3.org/2000/svg" p-id="7136" width="32" height="32">
                <path d="M386.681905 294.521905c53.638095 0 97.52381 43.885714 97.523809 97.523809v341.333334c0 53.638095-43.885714 97.52381-97.523809 97.523809s-97.52381-43.885714-97.52381-97.523809v-341.333334c0-53.638095 43.885714-97.52381 97.52381-97.523809z"
                      fill="#FFCD00" p-id="7137"></path>
                <path d="M694.857143 405.699048h-170.666667c-6.826667 0-12.190476-5.36381-12.190476-12.190477s5.36381-12.190476 12.190476-12.190476h170.666667c6.826667 0 12.190476 5.36381 12.190476 12.190476s-5.36381 12.190476-12.190476 12.190477zM376.685714 437.150476c-2.925714 0-5.851429-0.975238-8.289524-3.169524l-45.348571-41.935238c-4.87619-4.632381-5.36381-12.190476-0.731429-17.310476s12.190476-5.12 17.310477-0.731428l37.059047 34.377142 59.733334-55.344762c4.87619-4.632381 12.678095-4.388571 17.310476 0.731429 4.632381 4.87619 4.388571 12.678095-0.731429 17.310476l-68.022857 62.902857c-2.438095 1.950476-5.36381 3.169524-8.289524 3.169524zM694.857143 576.365714h-170.666667c-6.826667 0-12.190476-5.36381-12.190476-12.190476s5.36381-12.190476 12.190476-12.190476h170.666667c6.826667 0 12.190476 5.36381 12.190476 12.190476s-5.36381 12.190476-12.190476 12.190476zM376.685714 605.379048c-2.925714 0-5.851429-0.975238-8.289524-3.169524l-45.348571-41.935238c-4.87619-4.632381-5.36381-12.190476-0.731429-17.310476s12.190476-5.12 17.310477-0.731429l37.059047 34.377143 59.733334-55.344762c4.87619-4.632381 12.678095-4.388571 17.310476 0.731428 4.632381 4.87619 4.388571 12.678095-0.731429 17.310477l-68.022857 62.902857c-2.438095 2.194286-5.36381 3.169524-8.289524 3.169524zM694.857143 747.032381h-170.666667c-6.826667 0-12.190476-5.36381-12.190476-12.190476s5.36381-12.190476 12.190476-12.190476h170.666667c6.826667 0 12.190476 5.36381 12.190476 12.190476s-5.36381 12.190476-12.190476 12.190476zM388.144762 795.794286a60.952381 60.952381 0 0 1 0-121.904762c33.645714 0 60.952381 27.306667 60.952381 60.952381s-27.550476 60.952381-60.952381 60.952381z m0-97.52381c-20.23619 0-36.571429 16.335238-36.571429 36.571429s16.335238 36.571429 36.571429 36.571428 36.571429-16.335238 36.571428-36.571428-16.579048-36.571429-36.571428-36.571429zM658.285714 247.710476c-6.826667 0-12.190476-5.36381-12.190476-12.190476v-146.285714c0-6.826667-5.36381-12.190476-12.190476-12.190476H390.095238c-6.826667 0-12.190476 5.36381-12.190476 12.190476v146.285714c0 6.826667-5.36381 12.190476-12.190476 12.190476s-12.190476-5.36381-12.190476-12.190476v-146.285714c0-20.23619 16.335238-36.571429 36.571428-36.571429h243.809524c20.23619 0 36.571429 16.335238 36.571428 36.571429v146.285714c0 6.826667-5.36381 12.190476-12.190476 12.190476z"
                      p-id="7138"></path>
                <path d="M585.874286 212.114286h-147.504762c-6.826667 0-12.190476-5.36381-12.190476-12.190476s5.36381-12.190476 12.190476-12.190477h147.504762c6.826667 0 12.190476 5.36381 12.190476 12.190477s-5.607619 12.190476-12.190476 12.190476z"
                      p-id="7139"></path>
                <path d="M777.99619 896.24381H246.00381c-20.23619 0-36.571429-16.335238-36.571429-36.571429V224.304762c0-20.23619 16.335238-36.571429 36.571429-36.571429H292.571429c6.826667 0 12.190476 5.36381 12.190476 12.190477s-5.36381 12.190476-12.190476 12.190476h-46.567619c-6.826667 0-12.190476 5.36381-12.190477 12.190476v635.367619c0 6.826667 5.36381 12.190476 12.190477 12.190476h531.99238c6.826667 0 12.190476-5.36381 12.190477-12.190476V224.304762c0-6.826667-5.36381-12.190476-12.190477-12.190476H731.428571c-6.826667 0-12.190476-5.36381-12.190476-12.190476s5.36381-12.190476 12.190476-12.190477h46.567619c20.23619 0 36.571429 16.335238 36.571429 36.571429v635.367619c0 20.23619-16.335238 36.571429-36.571429 36.571429z"
                      p-id="7140"></path>
                <path d="M828.952381 971.337143H195.047619a60.952381 60.952381 0 0 1-60.952381-60.952381v-731.428572A60.952381 60.952381 0 0 1 195.047619 118.00381h97.52381c6.826667 0 12.190476 5.36381 12.190476 12.190476s-5.36381 12.190476-12.190476 12.190476H195.047619c-20.23619 0-36.571429 16.335238-36.571429 36.571428v731.428572c0 20.23619 16.335238 36.571429 36.571429 36.571428h633.904762c20.23619 0 36.571429-16.335238 36.571429-36.571428v-731.428572c0-20.23619-16.335238-36.571429-36.571429-36.571428h-97.52381c-6.826667 0-12.190476-5.36381-12.190476-12.190476s5.36381-12.190476 12.190476-12.190476h97.52381a60.952381 60.952381 0 0 1 60.952381 60.95238v731.428572c0 33.401905-27.306667 60.952381-60.952381 60.952381z"
                      p-id="7141"></path>
            </svg>
            <span>工作台</span>
        </a></li>
        <li><a href="javascript:void(0);" class="">
            <svg t="1617351886553" class="icon" viewBox="0 0 1024 1024" version="1.1"
                 xmlns="http://www.w3.org/2000/svg" p-id="6217" width="32" height="32">
                <path d="M896 608a32 32 0 0 1 31.850667 28.928L928 640v96c0 115.946667-93.312 210.133333-209.450667 213.248l-5.909333 0.085333h-401.28c-116.885333 0-212.138667-92.288-215.274667-207.466666L96 736V640a32 32 0 0 1 63.850667-3.072L160 640v96c0 80.704 64.96 146.602667 146.261333 149.248l5.12 0.085333h401.258667c81.962667 0 148.586667-64.234667 151.274667-144.298666l0.085333-5.034667V640a32 32 0 0 1 32-32zM503.978667 123.370667a32 32 0 0 1 34.752-1.706667l2.624 1.706667 266.666666 192a32 32 0 0 1-34.794666 53.610666l-2.581334-1.685333L522.666667 188.757333l-247.978667 178.56a32 32 0 0 1-42.730667-4.864l-1.92-2.432a32 32 0 0 1 4.842667-42.730666l2.432-1.92 266.666667-192z"
                      fill="#8a8a8a" p-id="6218"></path>
                <path d="M522.666667 704a32 32 0 0 1-32-32v-490.666667a32 32 0 0 1 64 0v490.666667a32 32 0 0 1-32 32z"
                      fill="#8a8a8a" p-id="6219"></path>
            </svg>
            <span>文件上传</span>
        </a></li>
        <li><a href="javascript:void(0);" class="">
            <svg t="1617382557963" class="icon" viewBox="0 0 1024 1024" version="1.1"
                 xmlns="http://www.w3.org/2000/svg" p-id="2058" width="32" height="32">
                <path d="M605.333333 772.672L533.333333 830.272V533.333333a21.333333 21.333333 0 0 0-42.666666 0v296.938667l-72-57.6a21.333333 21.333333 0 0 0-26.666667 33.322667l106.666667 85.333333a21.376 21.376 0 0 0 26.666666 0l106.666667-85.333333a21.333333 21.333333 0 1 0-26.666667-33.322667z"
                      fill="#1296db" p-id="2059"></path>
                <path d="M810.666667 384c-1.130667 0-2.24 0-3.328 0.042667a298.496 298.496 0 0 0-565.418667-84.906667A213.333333 213.333333 0 0 0 256 725.333333h21.333333a21.333333 21.333333 0 0 0 0-42.666666h-21.333333a170.666667 170.666667 0 0 1 0-341.333334 21.333333 21.333333 0 0 0 19.712-13.12 255.786667 255.786667 0 0 1 491.370667 80.832 21.333333 21.333333 0 0 0 24.533333 19.626667A124.224 124.224 0 0 1 810.666667 426.666667a128 128 0 0 1 0 256h-64a21.333333 21.333333 0 0 0 0 42.666666h64a170.666667 170.666667 0 0 0 0-341.333333z"
                      fill="#1296db" p-id="2060"></path>
            </svg>
            <span>文件下载</span>
        </a></li>
        <li><a href="javascript:void(0);" class="">
            <svg t="1619861675149" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2374" width="32" height="32"><path d="M920.5248 942.08H148.61824A82.12992 82.12992 0 0 1 66.56 860.06272V108.57984a36.9152 36.9152 0 0 1 73.8304 0v751.48288a8.23808 8.23808 0 0 0 8.22784 8.22272H920.5248a36.89984 36.89984 0 1 1 0 73.79456zM230.912 643.44064a36.89984 36.89984 0 0 1-25.6-63.4624l220.3136-212.2496a36.9152 36.9152 0 0 1 51.712 0.47616l122.8288 122.77248 212.79744-207.96928a36.90496 36.90496 0 1 1 51.6096 52.76672l-238.89408 233.472a36.9152 36.9152 0 0 1-51.90144-0.29696L450.71872 445.99808 256.512 633.10336a36.77184 36.77184 0 0 1-25.6 10.33728z" fill="#595BB3" p-id="2375"></path><path d="M833.50016 489.56416l-199.3472 199.52128a22.9888 22.9888 0 0 1-31.08864-0.16384l-126.19776-119.61344a22.98368 22.98368 0 0 0-30.97088-0.27136L268.288 731.30496a20.82816 20.82816 0 0 0 15.36 36.03456H849.92a21.54496 21.54496 0 0 0 22.10816-21.03296l-0.96256-241.84832c-0.08704-18.51392-23.6032-27.83744-37.56544-14.89408z" fill="#F4CA1C" p-id="2376"></path></svg>
            <span>语句分析</span>
        </a></li>
        <li><a href="javascript:void(0);" class="">
            <svg t="1620114744658" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2933" width="32" height="32"><path d="M789.333333 512a192 192 0 0 1 192 192v42.666667a191.317333 191.317333 0 0 1-49.962666 129.194666 40.618667 40.618667 0 0 1 14.592 9.770667l45.696 45.696a42.666667 42.666667 0 0 1-60.288 60.330667l-45.738667-45.696a42.666667 42.666667 0 0 1-12.8-26.410667A190.549333 190.549333 0 0 1 789.333333 938.666667h-42.666666a192 192 0 0 1-192-192v-42.666667a192 192 0 0 1 192-192zM810.666667 0a128 128 0 0 1 127.786666 120.490667L938.666667 128v256a42.666667 42.666667 0 0 1-85.034667 4.992L853.333333 384V128a42.666667 42.666667 0 0 0-37.674666-42.368L810.666667 85.333333H128a42.666667 42.666667 0 0 0-42.368 37.674667L85.333333 128v725.333333a42.666667 42.666667 0 0 0 37.674667 42.368L128 896h298.666667a42.666667 42.666667 0 0 1 4.992 85.034667L426.666667 981.333333H128a128 128 0 0 1-127.786667-120.490666L0 853.333333V128A128 128 0 0 1 120.490667 0.213333L128 0h682.666667z m-21.333334 597.333333h-42.666666a106.666667 106.666667 0 0 0-106.666667 106.666667v42.666667a106.666667 106.666667 0 0 0 106.666667 106.666666h42.666666a106.666667 106.666667 0 0 0 106.666667-106.666666v-42.666667a106.666667 106.666667 0 0 0-106.666667-106.666667zM469.333333 512a42.666667 42.666667 0 0 1 0 85.333333H256a42.666667 42.666667 0 0 1 0-85.333333h213.333333z m213.333334-213.333333a42.666667 42.666667 0 0 1 0 85.333333H256a42.666667 42.666667 0 1 1 0-85.333333h426.666667z" fill="#008df0" p-id="2934"></path></svg>
            <span>文件分析</span>
        </a></li>
    </ul>
</div>
<div class="container1">
    <section id="workbench" class="d-none">
        <form action="" method="post" class="mb-3">{% csrf_token %}
            <select name="selectedFile">
                {% for document in documents %}
                <option value="{{ document.id }}">{{ document.file.name }}</option>
                {% endfor %}
            </select>
            <input type="submit" onclick="javascript:void(0);" name="edit" id="edit" class="btn btn-primary btn-sm" value="编辑">
        </form>
        <div class="{{ edit_alert_display }} alert alert-danger mb-1 mt-1" id="process-alert">该文件已被三人处理</div>
        <article class="p-3">
            {{ cur_edit.review }}
        </article>
        <div class="{{ process_alert_display }} alert alert-danger mb-1" id="process-alert">{{ process_alert }}</div>
        <form id="process" action="" method="POST" class="{{ process_submit_display }} ">{% csrf_token %}
            <input type="hidden" name="docitemid" value={{ cur_edit.id }}>
            <input type="submit" name="previous" class="btn btn-primary" value="上一条">
            <input type="submit" name="negative" class="btn btn-primary" value="消极的">
            <input type="submit" name="flat" class="btn btn-primary" value="中性的">
            <input type="submit" name="positive" class="btn btn-primary" value="积极的">
            <input type="submit" name="next" class="btn btn-primary" value="下一条">
        </form>
    </section>
    <section id="upload" class="d-none">
        <form class="form-inline" action='' method="post" enctype="multipart/form-data" >
            {% csrf_token %}
            <input type="file" id="docfile" name="docfile" required>
            <input type="submit" name="upload" class="btn btn-primary" value="上传">
        </form>
    </section>
    <section id="download" class="d-none" >
        <form action="" method="post">{% csrf_token %}
            <select name="selectedFile">
                {% for document in documents %}
                <option value="{{ document.id }}">{{ document.file.name }}</option>
                {% endfor %}
            </select>
            <input type="submit" name="download" class="btn btn-primary btn-sm" value="下载">
        </form>
        <input type="button" class="btn dropdown-toggle " data-toggle="dropdown">
    </section>
    <section id="sentence_analyze" class="d-none">
        <form id="form_analyze" action="" method="POST">{% csrf_token %}
            <textarea id="tobe_processed" cols="80" rows="6" placeholder="请输入待分析语句......." >这个产品很好用</textarea>
            <input type="button" id="stanfordCoreNLP_process" class="btn btn-primary btn-sm" value="综合分析">
            <input type="button" id="simple_text_sentiment" class="btn btn-primary btn-sm" value="情感值">
            <input type="button" id="simple_text_wordcloud" class="btn btn-primary btn-sm" value="词云">
        </form>
        <div id="displayProcessed" class="alert"></div>
    </section>
    <section id="csv_file_analyze" class="d-block">
        <form action="" method="post">{% csrf_token %}
            <select id="csv_file_tobe_analysed">
                {% for document in documents %}
                <option value="{{ document.id }}">{{ document.file.name }}</option>
                {% endfor %}
            </select>
            <input type="button" id="csv_file_sentiment" class="btn btn-primary btn-sm" value="情感分析">
            <input type="button" id="csvreview_file_wordcloud" class="btn btn-primary btn-sm" value="词云">
            <input type="button" id="csvreview_file_word_frequency_bar_plt" class="btn btn-primary btn-sm" value="词频统计">
        </form>
        <div id="display_csv_file_Processed" class="alert"></div>
    </section>
</div>
<script>
    function getCookie(name) {
        let cookieValue = null;
        if (document.cookie && document.cookie !== '') {
            const cookies = document.cookie.split(';');
            for (let i = 0; i < cookies.length; i++) {
                const cookie = cookies[i].trim();
            // Does this cookie string begin with the name we want?
                if (cookie.substring(0, name.length + 1) === (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }
    $('li').each(function(index){
        $(this).click(function(){
            $('section:nth-child(' + (index + 1) +')').attr('class', 'd-block')
            $('section:not(:nth-child(' + (index + 1) + '))').attr('class', 'd-none')
        })
    })
    $('#stanfordCoreNLP_process').click(function(){
        data = {
            // 'csrfmiddlewaretoken': Cookies.get('csrftoken'),
            // 'csrfmiddlewaretoken': $('[name=csrfmiddlewaretoken]')[0].value,
            'csrfmiddlewaretoken': getCookie('csrftoken'),
            'tobe_processed': $('#tobe_processed').val(),
            'submit': 'stanfordCoreNLP_process'
        }
        $.post('analyse', data, function(data){
            var table = '<table>'
            table += '<tr><th>word_tokenize</th><th>pos_tag</th><th>ner</th><th>dependency_parse</th></tr>'
            for(var i = 0; i < data.word_tokenize.length; i++) {
                var row = '<tr><td>' + data.word_tokenize[i] + '</td><td>' + data.pos_tag[i]+ '</td><td>' + data.ner[i]+ '</td><td>' + data.dependency_parse[i] + '</td></tr>'
                table += row
            }
            table += '</table>'
            $('#displayProcessed').append(table)
            $('#displayProcessed').append('<div id="parse">' + data.parse + '</div>')

        })
    })
    $('#simple_text_sentiment').click(function(){
        data = {
            'csrfmiddlewaretoken': getCookie('csrftoken'),
            'tobe_processed': $('#tobe_processed').val(),
            'submit': 'simple_text_sentiment'
        }
        $.post('analyse', data, function(data){
            $('#displayProcessed').html('<b>情感值: </b>' + data.sentiments )
        })
    })
    $('#csv_file_sentiment').click(function(){
        data = {
            'csrfmiddlewaretoken': getCookie('csrftoken'),
            'csv_file_tobe_analysed': $('#csv_file_tobe_analysed')[0].value,
            'submit': 'csv_file_sentiment'
        }
        $.post('analyse', data, function(data){
            var table = '<table>'
            table += '<tr><th style="width:100px">情感值</th><th>评价</th></tr>'
            for(var i = 0; i < data.review.length; i++) {
                var row = '<tr><td>'
                if (data.sentiment[i] > 0.9){
                    row += '<svg t="1620292805899" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4277" width="22" height="22"><path d="M320.725697 655.126745c188.823061-21.209696 369.750542-95.933881 546.962455-159.820995-73.898503 104.139092-61.564884 214.986847-14.552638 332.543265-280.215693 146.661694-467.748627 17.081288-532.409817-172.72227z" fill="#2B2622" p-id="4278"></path><path d="M311.178753 640.935342l0.206421-0.051605c160.337046-18.061785 315.616792-75.188631 467.697021-131.231769 22.809454-8.411631 45.773724-16.874868 76.685179-27.969964 6.244217-2.270624 16.668447 1.960994 23.222295 9.495338 5.26372 5.986192 6.502243 12.333619 3.560752 15.739556-35.865545 50.676208-50.831024 102.900569-51.089049 156.673083-0.258026 53.824119 14.191403 109.351207 37.104067 166.581263 2.012599 5.005695 0.825682 9.030893-2.52865 10.785466h0.051605c-31.117875 16.307212-61.306859 29.260092-90.515346 39.219876-104.655143 35.607519-195.325304 31.014665-269.688252-0.30963-77.20123-32.511213-135.927833-92.373129-174.322028-165.807187-10.372625-19.867964-19.300307-40.716424-26.628232-62.23575-2.064204-5.986192 0.670866-10.269415 6.244217-10.888677z m491.899814-103.984276c-150.274051 55.320667-303.644409 111.828252-463.052563 131.231769 6.037797 16.410422 13.004485 32.201582 20.900066 47.321877 32.717633 62.493776 81.536058 112.963564 144.752305 139.591796 66.002923 27.815149 148.519478 31.117875 246.414353-2.167415 26.318601-8.979287 53.824119-20.64204 82.56816-35.349493-22.293403-57.539687-36.22678-113.582825-35.968755-168.077811 0.20642-41.28408 8.566447-81.587663 27.557124-120.962354l-23.17069 8.411631z" fill="#2B2622" p-id="4279"></path><path d="M557.954342 883.943759c9.701759-71.473064 78.542962-152.235045 178.0892-100.887971-12.798065-9.753364-29.982563-15.068689-51.50189-16.100791 61.668095-66.467369 137.992037-8.772867 164.001008 56.301164-114.666532 59.913521-209.103865 78.336542-290.588318 60.687598z" fill="#D22220" p-id="4280"></path><path d="M539.840951 888.433402c2.270624-16.565237 7.637555-33.59492 15.739556-49.334475 11.249912-21.777352 28.12478-41.748526 49.953737-55.630298 21.725747-13.830167 46.134959-22.654639 72.659981-24.047977 10.269415-8.669657 21.467722-15.27511 33.440104-20.074384 26.731442-10.733861 50.624603-11.765963 70.957013-5.779771 16.204001 4.747669 31.427506 14.191403 44.690017 26.525021 16.978078 15.68795 30.808245 36.22678 39.323086 57.539687 0.722471 1.857784-2.32223 4.644459-7.48274 7.173109-61.564884 32.098372-118.69173 53.308068-172.257824 64.35156l-1.599758 0.30963c-52.533992 10.579046-99.804263 10.888676-142.791311 1.599758-2.115809-0.464446-2.941491-1.393338-2.631861-2.63186z m51.605101-57.230056c-7.68916 14.862269-12.798065 30.75664-15.120295 46.23817 36.949252 7.58595 75.911102 7.431134 117.556418-1.032102l0.928892-0.206421c40.355188-8.308421 84.941995-24.822053 134.534496-50.108552-8.411631-19.867964-21.519327-38.85864-37.362093-53.617699-12.540039-11.611148-26.731442-20.487225-41.59371-24.822053-10.682256-3.147911-19.506728-4.076803-24.976869-1.857783-5.831376 2.32223-12.436829 6.966689-19.867963 14.294612 8.824472 0.825682 16.874868 2.373835 24.151186 4.644459 9.082498 2.838281 16.978078 6.811873 23.738347 11.972384 2.683465 2.012599-2.012599 6.192612-10.940282 9.701758-9.340523 3.663962-19.867964 5.108905-23.428715 3.251122-15.636345-8.050396-30.240589-12.694855-43.761125-14.501033-17.287709-2.373835-31.221086 0.928892-41.851736 7.68916-17.494129 11.198307-31.840347 28.589225-42.006551 48.353978z" fill="#2B2622" p-id="4281"></path><path d="M357.313713 724.277579c151.667389-56.76561 309.42418-106.925767 467.490601-140.159452 8.308421-30.137378 8.308421-55.062642 28.898856-84.167918-177.160308 63.887114-337.187724 133.96684-526.010785 155.176536 8.566447 25.028474 16.874868 46.702616 29.621328 69.150834z m478.637302 72.195535c-96.140301 39.168271-192.693444 67.138235-293.942649 83.548657 84.425944 23.17069 182.011188 14.036587 304.160459-49.902132-4.489644-11.249912-6.399032-22.448219-10.21781-33.646525z" fill="#FFFFFF" p-id="4282"></path><path d="M371.969561 711.84075c72.401955-26.834652 146.042433-52.121151 220.405382-74.77579 72.04072-21.932168 144.803911-41.38729 217.773522-57.436476 2.580255-11.095097 4.489644-21.725747 7.173109-32.046768 2.838281-10.52744 6.502243-21.054881 12.64325-32.046767-24.047977 8.772867-46.34138 17.081288-68.479968 25.338104-135.360177 50.469788-265.198609 98.926977-411.911908 119.775438 2.73507 7.637555 5.521746 15.017084 8.566446 22.190193 4.076803 9.804969 8.566447 19.351913 13.830167 29.002066z m212.974248-58.210553c-76.788389 23.37711-152.751096 49.644106-227.217256 77.459255-8.411631 3.354332-15.945976 3.921988-17.494128 1.135312-6.399032-11.301517-11.714358-22.345008-16.513632-33.80134-4.799274-11.456332-8.979287-23.06748-13.262511-35.504309-0.619261-1.444943 0.309631-3.612357 2.993096-6.192612 5.521746-5.315325 16.410422-10.372625 24.254397-11.198307 151.770599-17.029683 285.531018-66.931815 425.484049-119.156176 31.324296-11.662753 63.009827-23.480321 91.960289-33.90455 1.702968-0.619261 3.354332-1.135312 5.005694-1.496548 8.979287-2.115809 13.365721 0.20642 9.856574 5.212115-9.701759 13.675352-14.604243 26.525021-18.061785 39.529506-3.612357 13.726957-5.624956 27.299098-9.804969 42.522603-0.20642 0.774077-0.670866 1.651363-1.444942 2.63186-3.973593 5.0573-14.294613 10.682256-23.015875 12.488434-77.820491 16.255607-155.640982 36.846041-232.739001 60.274757z m235.474071 156.105428c-44.431991 17.494129-88.967192 32.717633-134.018444 45.567303-30.705035 8.772867-61.616489 16.462027-92.992391 23.015875 30.137378 4.541249 61.874515 4.850879 95.624251-0.103211 42.006551-6.192612 87.677065-20.693645 137.992037-45.567303-1.651363-4.850879-2.941491-9.598549-4.180013-14.294613-0.774077-2.889886-1.599758-5.779771-2.42544-8.618051z m-124.987552 28.53762c47.063851-13.417326 93.508441-29.621327 139.849821-48.508794 8.979287-3.663962 16.874868-4.128408 17.958575-0.928892 1.754573 5.108905 2.993096 9.856574 4.283223 14.552638 1.702968 6.295822 3.405937 12.74646 5.831377 18.784257 1.548153 2.786675-3.354332 8.102001-11.765963 12.488434-66.364159 34.730232-126.122864 54.598196-180.721061 62.596986-52.792017 7.740765-100.217104 4.180013-143.823413-7.79237l0.051605-0.051605c-3.096306-0.877287-3.354332-3.457542-0.10321-6.966688 4.799274-5.212115 15.37832-10.52744 23.68674-11.869173 49.17966-7.947185 97.224008-18.732651 144.752306-32.304793zM216.43179 237.17704c-8.463236 0-14.707454-2.838281-13.830167-6.399033 0.825682-3.560752 8.360026-6.399032 16.823262-6.399032 47.476692-0.051605 90.0509 1.032102 129.115961 2.993096 39.116666 1.960994 74.56937 4.799274 107.699843 8.153606 8.050396 0.774077 12.385224 4.231618 9.598549 7.689159-1.290128 1.651363-3.973593 2.993096-7.276319 3.870383C405.770902 261.276621 354.423827 276.603336 305.502192 293.581414c-48.818425 16.978078-95.469435 35.710729-138.920929 56.86882-5.779771 2.786675-15.533135 3.354332-21.777352 1.238523-6.244217-2.115809-6.605453-6.141007-0.825682-8.927683 44.844832-21.777352 92.88918-41.129265 143.255758-58.623393 22.706244-7.89558 45.825329-15.429925 69.357254-22.603034-13.830167 2.219019-27.660334 4.644459-41.38729 7.276319-43.761125 8.360026-87.057804 18.887467-129.580406 32.304793-7.069899 2.219019-16.668447 1.857784-21.364512-0.928892-4.696064-2.73507-2.786675-6.760268 4.334829-8.979288 44.741622-14.191403 90.15411-25.183289 136.082649-33.956155 28.692436-5.470141 57.642897-10.062995 86.696568-14.036588-15.842766-1.186917-32.304793-2.219019-49.437686-3.0447-37.826538-1.960994-79.213829-3.044701-125.503603-2.993096z m504.285037-116.317896c6.244217-2.63186 15.997581-2.838281 21.725747-0.516051 5.779771 2.32223 5.36693 6.399032-0.877286 9.030893-32.356398 13.623746-61.152044 26.834652-87.31583 39.684322-7.637555 3.715567-14.965479 7.431134-22.086983 11.095096 13.520536-3.199516 27.092678-6.141007 40.768029-8.824472 35.91715-7.018294 72.401955-12.127199 109.660838-14.604243 8.514842-0.567656 15.791161 1.806179 16.307212 5.315325 0.567656 3.457542-5.934587 6.760268-14.397823 7.327924-33.956156 2.270624-67.551076 7.018294-100.836366 13.520537-9.237313 1.806179-18.423021 3.767172-27.608728 5.831376 13.830167-0.928892 27.608729-1.651363 41.28408-2.167414 42.522602-1.599758 84.116313-1.083707 124.368291 2.373834 8.153606 0.670866 12.694855 4.076803 10.21781 7.534345-2.477045 3.457542-11.095097 5.676561-19.248703 5.005695-37.310487-3.199516-76.014312-3.715567-115.647029-2.21902-39.890742 1.496548-80.968402 5.005695-122.768533 9.753364-4.231618 0.464446-8.772867 0.309631-12.436829-0.774076-6.657058-1.909389-7.740765-5.882981-2.477045-8.824472 22.138588-12.436829 45.876934-25.080079 72.14393-38.032959 26.370206-12.95288 55.733508-26.421811 89.225218-40.510004z" fill="#2B2622" p-id="4283"></path></svg>'
                }
                else if(data.sentiment[i] > 0.7){
                    row += '<svg t="1620293135608" class="icon" viewBox="0 0 1025 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5307" width="22" height="22"><path d="M512.016 1024C229.232 1024 0.016 794.784 0.016 512 0.016 229.216 229.232 0 512.016 0 794.784 0 1024 229.216 1024 512 1024 794.784 794.784 1024 512.016 1024ZM512.016 64C264.976 64 64.016 264.96 64.016 512 64.016 759.024 264.976 960 512.016 960 759.04 960 960 759.024 960 512 960 264.96 759.04 64 512.016 64ZM510.336 833.456C509.056 833.456 507.744 833.488 506.448 833.488 310.992 833.488 229.024 657.12 225.616 649.552 218.336 633.424 225.488 614.496 241.584 607.216 257.712 599.968 276.576 607.088 283.888 623.088 286.64 629.12 352.928 769.488 506.576 769.488 507.584 769.488 508.576 769.456 509.584 769.456 672.896 767.552 738.368 624.768 739.024 623.344 746.176 607.216 765.024 599.872 781.264 607.152 797.392 614.336 804.672 633.248 797.456 649.408 794.176 656.8 714.208 831.056 510.336 833.456ZM671.504 479.84C636.224 479.84 607.664 451.232 607.664 415.984 607.664 380.768 636.224 352.176 671.504 352.176 706.768 352.176 735.344 380.768 735.344 415.984 735.344 451.232 706.768 479.84 671.504 479.84ZM351.504 479.84C316.224 479.84 287.664 451.232 287.664 415.984 287.664 380.768 316.224 352.176 351.504 352.176 386.768 352.176 415.344 380.768 415.344 415.984 415.344 451.232 386.768 479.84 351.504 479.84Z" p-id="5308" fill="#1296db"></path></svg>'
                }
                else if(data.sentiment[i] > 0.3){
                    row += '<svg t="1620293253367" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6175" width="22" height="22"><path d="M512.002 512.002m-491.988 0a491.988 491.988 0 1 0 983.976 0 491.988 491.988 0 1 0-983.976 0Z" fill="#FDDF6D" p-id="6176"></path><path d="M617.432 931.356c-271.716 0-491.986-220.268-491.986-491.986 0-145.168 62.886-275.632 162.888-365.684C129.054 155.124 20.014 320.828 20.014 512c0 271.716 220.268 491.986 491.986 491.986 126.548 0 241.924-47.796 329.098-126.298-67.102 34.31-143.124 53.668-223.666 53.668z" fill="#FCC56B" p-id="6177"></path><path d="M426.314 359.704m-142.718 0a142.718 142.718 0 1 0 285.436 0 142.718 142.718 0 1 0-285.436 0Z" fill="#FFFFFF" p-id="6178"></path><path d="M826.554 359.704m-142.718 0a142.718 142.718 0 1 0 285.436 0 142.718 142.718 0 1 0-285.436 0Z" fill="#FFFFFF" p-id="6179"></path><path d="M300.576 556.564c-36.536 0-66.156 29.62-66.156 66.158h132.314c-0.004-36.54-29.622-66.158-66.158-66.158zM877.628 547.698c-36.536 0-66.156 29.62-66.156 66.158h132.314c0-36.538-29.618-66.158-66.158-66.158z" fill="#F9A880" p-id="6180"></path><path d="M390.526 285.09m-40.03 0a40.03 40.03 0 1 0 80.06 0 40.03 40.03 0 1 0-80.06 0Z" fill="#7F184C" p-id="6181"></path><path d="M796.612 282.314m-40.03 0a40.03 40.03 0 1 0 80.06 0 40.03 40.03 0 1 0-80.06 0Z" fill="#7F184C" p-id="6182"></path><path d="M553.388 822.268a19.932 19.932 0 0 1-10.272-2.85c-9.482-5.684-12.558-17.976-6.874-27.458 27.59-46.018 76.732-74.606 128.244-74.606a146.14 146.14 0 0 1 45.684 7.282c10.504 3.448 16.22 14.758 12.77 25.262-3.45 10.498-14.76 16.222-25.262 12.766a106.238 106.238 0 0 0-33.192-5.282c-37.528 0-73.51 21.136-93.908 55.16a20.02 20.02 0 0 1-17.19 9.726z" fill="#7F184C" p-id="6183"></path><path d="M976.568 296.66a162.334 162.334 0 0 0-7.144-14.786c-0.916-1.814-1.79-3.65-2.724-5.452a19.944 19.944 0 0 0-3.282-4.576c-28.984-44.988-79.486-74.866-136.864-74.866-89.732 0-162.732 73-162.732 162.732 0 89.73 73 162.73 162.732 162.73 66.794 0 124.292-40.462 149.336-98.15 5.354 28.624 8.084 57.894 8.084 87.708 0 260.248-211.724 471.968-471.97 471.968S40.03 772.248 40.03 512 251.752 40.03 512 40.03c73.236 0 143.414 16.308 208.588 48.47 9.906 4.892 21.914 0.824 26.804-9.09 4.892-9.914 0.822-21.914-9.092-26.806C667.572 17.698 591.434 0 512 0 229.68 0 0 229.68 0 512c0 282.316 229.68 512 512 512s512-229.68 512-511.998c0-74.35-16.38-148.314-47.432-215.342z m-27.314 63.052c0 67.66-55.044 122.7-122.704 122.7s-122.704-55.044-122.704-122.7 55.044-122.704 122.704-122.704c46.26 0 86.612 25.742 107.516 63.646a477.884 477.884 0 0 1 5.604 11.532 121.936 121.936 0 0 1 9.584 47.526z" fill="" p-id="6184"></path><path d="M426.326 196.98c-89.732 0-162.732 73-162.732 162.732 0 89.73 73 162.73 162.732 162.73s162.732-73 162.732-162.73c0.002-89.732-73.002-162.732-162.732-162.732z m0 285.432c-67.66 0-122.704-55.044-122.704-122.7s55.044-122.704 122.704-122.704 122.704 55.046 122.704 122.704-55.046 122.7-122.704 122.7zM543.116 819.42a20.008 20.008 0 0 0 27.458-6.878c20.398-34.026 56.38-55.16 93.908-55.16 11.358 0 22.524 1.778 33.19 5.282 10.502 3.456 21.814-2.266 25.264-12.764 3.45-10.502-2.262-21.814-12.764-25.264a145.99 145.99 0 0 0-45.69-7.282c-51.516 0-100.652 28.588-128.244 74.606-5.68 9.482-2.604 21.776 6.878 27.46z" fill="" p-id="6185"></path><path d="M791.274 106.798m-20.014 0a20.014 20.014 0 1 0 40.028 0 20.014 20.014 0 1 0-40.028 0Z" fill="" p-id="6186"></path></svg>'
                }
                else {
                    row += '<svg t="1620293303062" class="icon" viewBox="0 0 1806 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="6785" width="22" height="22"><path d="M452.550498 11.13634h99.412202v223.813262h-99.412202zM1254.366944 11.13634h99.412201v223.813262h-99.412201zM1282.886838 947.403714h-54.323608v-55.953316a324.311936 324.311936 0 1 0-648.352254 0v55.953316h-54.323608v-55.953316a378.635544 378.635544 0 1 1 756.99947 0zM232.811506 1024A903.944828 903.944828 0 0 1 102.706466 0l48.348011 25.260477a849.077984 849.077984 0 0 0 121.956499 961.527852zM1572.703283 1024l-40.199469-36.668435A849.892838 849.892838 0 0 0 1655.275167 25.260477L1703.351559 0a904.488064 904.488064 0 0 1-130.648276 1024z" fill="#4D4D4D" p-id="6786"></path></svg>'
                }
                row += '&nbsp;&nbsp;&nbsp;' + data.sentiment[i].toFixed(3) + '</td><td>' + data.review[i]+ '</td></tr>'
                table += row
            }
            table += '</table>'
            $('#display_csv_file_Processed').html(table)
        })
    })
    $('#simple_text_wordcloud').click(function(){
        data = {
            'csrfmiddlewaretoken': getCookie('csrftoken'),
            'simple_text_wordcloud': $('#tobe_processed')[0].value,
            'submit': 'simple_text_wordcloud'
        }
        $.post('analyse', data, function(data){
            $('#displayProcessed').html('<img src=\"{% static "img/cloud.png" %}\">')
        })
    })
    $('#csvreview_file_wordcloud').click(function(){
        data = {
            'csrfmiddlewaretoken': getCookie('csrftoken'),
            'csv_file_tobe_analysed': $('#csv_file_tobe_analysed')[0].value,
            'submit': 'csvreview_file_wordcloud'
        }
        $.post('analyse', data, function(data){
            $('#display_csv_file_Processed').html('<img src=\"{% static "img/cloud.png" %}\">')
        })
    })
    $('#csvreview_file_word_frequency_bar_plt').click(function(){
        data = {
            'csrfmiddlewaretoken': getCookie('csrftoken'),
            'csv_file_tobe_analysed': $('#csv_file_tobe_analysed')[0].value,
            'submit': 'csvreview_file_word_frequency_bar_plt'
        }
        $.post('analyse', data, function(data){
            console.log('sdfasdfd')
            $('#display_csv_file_Processed').html('<img src=\"{% static "img/frequency.png" %}\">')
            // $('#display_csv_file_Processed').append('')
            console.log('ffffffffffffffffffffff')
        })
    })
    
</script>   
{% endblock %}